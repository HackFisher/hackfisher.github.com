--- 
layout: post
title: !binary |
  MzLkvY3lkow2NOS9je+8jOS7peWPiui3qOW5s+WPsOeahOmCo+eCueWEv+S6
  iw==
category: 研究
published: true
meta: 
  _oembed_eff3293670570b3c7a4cc4b712e5d805: "{{unknown}}"
  _oembed_0b48bdc59e5bf850a7b2ef292c940660: "{{unknown}}"
  _oembed_8085a3f5ac8b23958b5ec055688be95f: "{{unknown}}"
  _edit_last: "1"
  _wp_old_slug: 32%e4%bd%8d%e5%92%8c64%e4%bd%8d%ef%bc%8c%e4%bb%a5%e5%8f%8a%e8%b7%a8%e5%b9%b3%e5%8f%b0%e7%9a%84%e9%82%a3%e7%82%b9%e5%84%bf%e4%ba%8b
  _oembed_576dde8817e8e55cd1a74f9f1ff3646d: "{{unknown}}"
  _oembed_ee4f10d86c4a41cb646bb4d3a7581393: "{{unknown}}"
  _oembed_9dd31a95beed404467dcc5b98d4bafcf: "{{unknown}}"
  _oembed_d5a5fa3d19681ba66d18b3df3e58f9f1: "{{unknown}}"
  _oembed_54d3f31b125d41109ca4dd0ba535e110: "{{unknown}}"
tags: 
- Java
type: post
status: publish
---
64位的CPU可以跑 32位或者64位的OS

64位的OS可以跑32位或者64位的JVM

Java是跨平台的, 指得是Java编译成的class文件，可以在(32/64) .* (Oracle/IBM/...) .* (Linux/Win)等不同的JVM实现下面运行，Java源文件在不同的JVM下面不需要重新编译。但在不同的OS下面可能需要安装不同的JVM(这个程度上说，某个JVM实现不是跨平台的)。

怎么判断JVM是多少位的？

http://stackoverflow.com/questions/4574090/installed-jvm-is-64-bit-or-32-bit

怎么得到操作系统级别的信息?

http://stackoverflow.com/questions/4704073/how-can-i-get-system-hardware-info-via-java

http://stackoverflow.com/questions/25552/using-java-to-get-os-level-system-information

http://www.roseindia.net/java/beginners/OSInformation.shtml

http://nadeausoftware.com/articles/2008/03/java_tip_how_get_cpu_and_user_time_benchmarking

/com/fr/util/OperatingSystem.java

JNI，Java调用的本地库一般是用其他语言实现比如C等等，它们不是跨平台的，会遇到什么问题?

比如System.loadLibrary("FRElite4");在WIN下对应的是个DLL，在Linux下面是个.so/.a文件

再比如，Linux下面，32位下面编译的库，放到64位的JVM(不是OS?)中加载中会出现如下的错误，据说换成32bit的JVM就可以(这个需要测试一下)

http://www.linuxquestions.org/questions/linux-software-2/working-with-32-bit-jvm-on-64-system-sapgui-problem-654041/
<pre escaped="true" lang="java" line="1">java.lang.UnsatisfiedLinkError: /usr/lib/libFRElite4.so: /usr/lib/libFRElite4.so: wrong ELF class: ELFCLASS32 (Possible cause: architecture word width mismatch)
at java.lang.ClassLoader$NativeLibrary.load(Native Method)
at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1803)
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1728)
at java.lang.Runtime.loadLibrary0(Runtime.java:823)
at java.lang.System.loadLibrary(System.java:1028)
at Sense4.Elite4.(Elite4.java:41)
at com.fr.base.core.FRCoreContext.getLockBytes(Unknown Source)
at com.fr.base.core.FRCoreContext.getBytes(Unknown Source)
at com.fr.web.ReportServlet.init(Unknown Source)</pre>
飘忽不定的java.library.path，以及操作系统文件访问权限Java加载库文件，就是从System.getProperty("java.library.path")这个Path中寻找库的，但是这个默认属性值是由JVM确定的，其规律不太确定-Djava.library.path ..可以控制此属性，但是作为中间件，这个往往不能控制，需要Web服务器或者Resin提供设置，更何况很麻烦System.setProperty("java.library.path", "usr/lib:lib");的做法虽然能动态改变属性值，但是测试过似乎库又不能正常加载。
操作系统文件访问权限这个问题很少遇到上次WIN在下，cache文件位置遇到过一次，这次加密所虽然没遇到过，不过很有可能还会遇到这个问题，作为一个应用程序，只是个Servlet，不是宿主进程，如何获得root权限，修改文件会遇到权限的很多限制。
怎么判断JVM是多少位的？

http://stackoverflow.com/questions/4574090/installed-jvm-is-64-bit-or-32-bit
怎么得到操作系统级别的信息?

http://stackoverflow.com/questions/4704073/how-can-i-get-system-hardware-info-viajava

http://stackoverflow.com/questions/25552/using-java-to-get-os-level-systeminformation

http://www.roseindia.net/java/beginners/OSInformation.shtml

http://nadeausoftware.com/articles/2008/03/java_tip_how_get_cpu_and_user_time_benchmarking
JNI，Java调用的本地库一般是用其他语言实现比如C等等，它们不是跨平台的，会遇到什么问题?比如System.loadLibrary("XXX");在WIN下对应的是个DLL，在Linux下面是个.so/.a文件再比如，Linux下面，32位下面编译的库，放到64位的JVM(不是OS?)中加载中会出现如下的错误，据说换成32bit的JVM就可以(这个需要测试一下)

http://www.linuxquestions.org/questions/linux-software-2/working-with-32-bit-jvm-on-64-system-sapgui-problem-654041/
java.lang.UnsatisfiedLinkError: /usr/lib/libXXX.so: /usr/lib/libXXX.so: wrong ELF class: ELFCLASS32 (Possible cause: architecture word width mismatch)

at java.lang.ClassLoader$NativeLibrary.load(Native Method)

at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1803)

at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1728)

at java.lang.Runtime.loadLibrary0(Runtime.java:823)

at java.lang.System.loadLibrary(System.java:1028)
