--- 
layout: post
title: !binary |
  44CQ6Laj5ZGzSGFja+OAkVRyeTJoYWNrLm5s56ys5LiD5YWz

published: true
meta: 
  _edit_last: "1"
  _wp_old_slug: "%e3%80%90%e8%b6%a3%e5%91%b3hack%e3%80%91try2hack-nl%e7%ac%ac%e4%b8%83%e5%85%b3"
tags: 
- Hack
- Http
- Lisp
- !binary |
  6Laj5ZGzSGFjaw==

type: post
status: publish
---
第七关地址：

<a href="http://www.try2hack.nl/levels/level7-xfkohc.php">http://www.try2hack.nl/levels/level7-xfkohc.php</a>

a. 打开页面，提示说必须要用IE 7.66登录，于是下了一个IE Tester访问，还是不行，必须是要这个版本的。

b. 于是想到了重写访问报头(HTTP-HEADER)的user-agent，改成MSIE 7.66，又提示需要用Linux系统访问，照例在user-agent加上Linux

c. 最后，还需要加上Referer为http://www.microsoft.com/ms.htm，也加上，这些都很简单，修改后，可以看到第八关的入口。

d. 下面我们用Lisp语言来实现之，首先安装<a href="http://sourceforge.net/projects/clisp/">clisp</a>。找到一本书学习一下，比如<a href="http://landoflisp.com/">Land of Lisp</a>。

<a href="{{ BASE_PATH }}/uploads/2011/02/land_of_lisp.jpg"><img class="aligncenter size-full wp-image-124" title="land_of_lisp" src="{{ BASE_PATH }}/uploads/2011/02/land_of_lisp.jpg" alt="" width="315" height="420" /></a>e. 下载安装并学会使用Lisp的一个库管理器<a href="http://www.quicklisp.org/">Quicklisp</a>。
<pre escaped="true" lang="lisp" line="1">(quicklisp-quickstart:install)</pre>
f. google 搜索 lisp http client，找到<a href="http://weitz.de/drakma/">drakma</a>。在quicklisp中搜索并安装drakma.
<pre escaped="true" lang="lisp" line="1">(ql:system-apropos "drakma")
(ql:quickload "drakma")</pre>
<div>g. 在安装过程中可能会弹出找不到openssl的DLL外部库的信息，所有的库可以在<a href="http://gnuwin32.sourceforge.net/packages/openssl.htm">这里</a>找到。</div>
h. 最终，使用drakma的http-request访问第七关的网址，输出返回的信息保存为html，用浏览器打开，得到<a href="http://www.try2hack.nl/levels/level8-balnrg.xhtml">第八关的地址</a>。
<pre escaped="true" lang="lisp" line="1">(http-request "http://www.try2hack.nl/levels/level7-xfkohc.php"
:user-agent "Mozilla/4.0 (compatible;MSIE 7.66;Linux)\\r\\n"
:additional-headers '((Referer . "http://www.microsoft.com/ms.htm"))
)</pre>
