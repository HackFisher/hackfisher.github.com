--- 
layout: post
title: !binary |
  44CQ6Laj5ZGzSGFja+OAkVRyeTJoYWNrLm5s56ys5LiJ5YWz

published: true
meta: 
  _edit_last: "1"
  _wp_old_slug: "%e3%80%90%e8%b6%a3%e5%91%b3hack%e3%80%91try2hack-nl%e7%ac%ac%e4%b8%89%e5%85%b3"
tags: 
- Hack
- Web
- !binary |
  6Laj5ZGzSGFjaw==

type: post
status: publish
---
第三关地址：<a href="http://www.try2hack.nl/levels/level3-.xhtml">http://www.try2hack.nl/levels/level3-.xhtml</a>

a. 刚打开网站，浏览器弹出如下一个对话框，如果点确定或者取消，就会立即跳转到另外一个网页，导致无法用Chrome的开发人员工具或者firebug查看源代码。

<a href="http://www.hackfisher.info/blog/wp-content/uploads/2011/02/level3_prompt.png"><img class="aligncenter size-full wp-image-91" title="level3_prompt" src="http://www.hackfisher.info/blog/wp-content/uploads/2011/02/level3_prompt.png" alt="" width="356" height="132" /></a>

b. 其实不一定要在浏览器里面查看源代码，自己写个程序到那个地址读出来就是。
<pre escaped="true" lang="java" line="1">import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.UnsupportedEncodingException;
import java.net.URL;
public class Main {
/**
* @param args
*/
public static void main(String[] args) throws Exception {
String htmlContent = readResourceAsString((new URL("http://www.try2hack.nl/levels/level3-.xhtml")).openStream(), "utf-8");
System.out.println(htmlContent);
}
public static String readResourceAsString(InputStream in, String encode) {
StringBuffer sb = new StringBuffer();
String line = null;
if (in != null) {
try {
java.io.BufferedReader br = new BufferedReader(
new java.io.InputStreamReader(in, encode));
while ((line = br.readLine()) != null) {
// 换行
if (sb.length() &gt; 0) {
sb.append('\n');
}
sb.append(line);
}
} catch (UnsupportedEncodingException e) {
e.printStackTrace();
} catch (IOException e) {
e.printStackTrace();
}
}
return sb.toString();
}
}
import java.io.BufferedReader;import java.io.IOException;import java.io.InputStream;import java.io.UnsupportedEncodingException;import java.net.URL;

public class Main {
/**	 * @param args	 */	public static void main(String[] args) throws Exception {	 String htmlContent = readResourceAsString((new URL("http://www.try2hack.nl/levels/level3-.xhtml")).openStream(), "utf-8");	 System.out.println(htmlContent);	}	 public static String readResourceAsString(InputStream in, String encode) {	 StringBuffer sb = new StringBuffer();	 String line = null;	 if (in != null) {	 try { java.io.BufferedReader br = new BufferedReader(	 new java.io.InputStreamReader(in, encode));	 while ((line = br.readLine()) != null) { // 换行	 if (sb.length() &gt; 0) {	 sb.append('\n');	 }	 sb.append(line);	 }	 } catch (UnsupportedEncodingException e) {	 e.printStackTrace();	 } catch (IOException e) {	 e.printStackTrace();	 }	 }
return sb.toString();	}
}</pre>
c. 运行这个Java程序，然后得到输出的HTML，注意输出中的脚本逻辑具有迷惑性：
<pre escaped="true" lang="java" line="1">&lt;script type="text/javascript" src="JavaScript"&gt;&lt;/script&gt;
    &lt;script type="text/javascript"&gt;
      &lt;!--
      pwd = prompt("Please enter the password for level 3:","");
      if (pwd==PASSWORD){
        alert("Allright!\nEntering Level 4 ...");
        location.href = CORRECTSITE;
      }
      else {
        alert("WRONG!\nBack to disneyland !!!");
        location.href = WRONGSITE;
      }
      PASSWORD="AbCdE";
      CORRECTSITE="level4-sfvfxc.xhtml";
      WRONGSITE="http://www.disney.com";
      //--&gt;
    &lt;/script&gt;</pre>
d. 你可能意味密码就是"AbCdE"，但是错了，这是为了误导里的，真正的密码在这个文件里面：
<pre escaped="true" lang="java" line="1">http://www.try2hack.nl/levels/JavaScript</pre>
